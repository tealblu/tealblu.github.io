(()=>{(()=>{const n="navMessageRotatorState",e=()=>{if(typeof window=="undefined")return null;try{return window.localStorage}catch(e){console.warn("Nav modules localStorage access failed",e)}return null},s=()=>{const t=e();if(!t)return null;try{const s=t.getItem(n);if(!s)return null;const e=JSON.parse(s);return e&&typeof e=="object"?e:null}catch(e){console.warn("Nav modules: nav rotator state read failed",e)}return null},o=t=>{const o=e();if(!o)return;const s=e=>Number.isFinite(e)?Number(e):null,i={activeIndex:s(t?.activeIndex),lastRotationAt:s(t?.lastRotationAt),nextRotationDueAt:s(t?.nextRotationDueAt),rotationInterval:s(t?.rotationInterval),autoRotateEnabled:t?.autoRotateEnabled===!0};try{o.setItem(n,JSON.stringify(i))}catch(e){console.warn("Nav modules: nav rotator state persist failed",e)}},i=()=>{if(typeof document=="undefined")return;const t=document.getElementById("nav-message-rotator");if(!t||t.__navMessageRotatorAttached)return;const i=Array.from(t.querySelectorAll(".nav-module-message"));if(!i.length)return;let n=i.findIndex(e=>e.classList.contains("is-active"));n<0&&(n=0);const a=s();if(a&&Number.isFinite(a.activeIndex)){const e=Math.max(0,Math.min(i.length-1,a.activeIndex|0));n=e}let c=a&&Number.isFinite(a.lastRotationAt)?Number(a.lastRotationAt):null,r=a&&Number.isFinite(a.nextRotationDueAt)?Number(a.nextRotationDueAt):null;const j=a&&Number.isFinite(a.rotationInterval)?Number(a.rotationInterval):null,y=e=>{if(!e)return;e.classList.remove("is-overflowing");const t=e.querySelector(".nav-module-text");if(!t)return;e.dataset.navOriginalHtml&&(t.innerHTML=e.dataset.navOriginalHtml,delete e.dataset.navOriginalHtml);const n=t.querySelector(".nav-module-track");n&&(n.style.removeProperty("--nav-scroll-distance"),n.style.removeProperty("--nav-scroll-duration"))};let v=null;const k=()=>{v=null;const t=i[n];if(i.forEach((e,t)=>{t!==n&&y(e)}),!t)return;const s=t.querySelector(".nav-module-text");if(!s){y(t);return}const o=t.clientWidth,a=s.scrollWidth,c=typeof window!="undefined"&&typeof window.matchMedia=="function"&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;if(!Number.isFinite(o)||o<=0||a<=o||c){y(t);return}let e=s.querySelector(".nav-module-track");if(!e){t.dataset.navOriginalHtml=s.innerHTML;const o=s.innerHTML;s.innerHTML="",e=document.createElement("span"),e.className="nav-module-track";const n=document.createElement("span");n.className="nav-module-track-item",n.innerHTML=o;const i=n.cloneNode(!0);e.appendChild(n),e.appendChild(i),s.appendChild(e)}const r=e.firstElementChild?e.firstElementChild.scrollWidth:a,l=32,d=Math.max(0,Math.round(r+l)),u=Math.max(6e3,Math.min(2e4,Math.round(r/40*1e3)));t.classList.add("is-overflowing"),e.style.setProperty("--nav-scroll-distance",`${d}px`),e.style.setProperty("--nav-scroll-duration",`${u}ms`)},f=()=>{if(typeof window=="undefined")return;v!==null&&window.cancelAnimationFrame(v),v=window.requestAnimationFrame(k)},w=(e,s={})=>{const o=(Number(e)%i.length+i.length)%i.length;i.forEach((e,n)=>{const s=n===o;if(e.classList.toggle("is-active",s),e.setAttribute("aria-hidden",s?"false":"true"),s){t.dataset.activeIndex=String(n);const s=typeof e.dataset.label=="string"?e.dataset.label:"",o=(e.textContent||"").trim();s?t.title=s:o?t.title=o:t.removeAttribute("title")}}),n=o;const a=Number.isFinite(s?.rotationAt)?Number(s.rotationAt):Date.now();c=a,f()};let e=Number.parseInt(t.dataset.rotationInterval||"",10);(!Number.isFinite(e)||e<=0)&&(e=Number.isFinite(j)&&j>0?j|0:NaN);const m=typeof window!="undefined"&&typeof window.matchMedia=="function"?window.matchMedia("(prefers-reduced-motion: reduce)"):null,u=Number.isFinite(e)&&e>0;u&&(e=Math.max(1,e|0));let l=u&&!(m&&m.matches),b=null;const h=()=>{o({activeIndex:n,lastRotationAt:c,nextRotationDueAt:r,rotationInterval:u?e:null,autoRotateEnabled:l})},d=Date.now();let g=null;if(l&&u)if(Number.isFinite(r)){let t=r,s=n;for(;t<=d;)t+=e,s=(s+1)%i.length;r=t,c=t-e,n=s,g=t-d}else if(Number.isFinite(c)){const t=Math.max(0,d-c);if(t>=e){const s=Math.floor(t/e);s>0&&(n=(n+s)%i.length,c+=s*e)}const o=Math.max(0,d-c),s=e-o;g=s>0?s:e,r=d+g}else c=d,g=e,r=d+e;else r=null;const E=Number.isFinite(c)?Number(c):Date.now();w(n,{rotationAt:E}),h(),f();const _=()=>{b!==null&&(window.clearTimeout(b),b=null)},O=()=>{const e=(n+1)%i.length;w(e),r=null,h()},p=t=>{if(!l)return;_();const s=u?Math.max(e,1e3):4e3,o=Number.isFinite(t)?Number(t):s,n=Math.max(o,100);r=Date.now()+n,h(),b=window.setTimeout(()=>{O(),p()},n)},x=()=>{if(!l)return;_(),r=null,h()},C=()=>{if(!l)return;p()};t.addEventListener("click",()=>{O(),l&&p()}),m&&typeof m.addEventListener=="function"&&m.addEventListener("change",e=>{l=u&&!e.matches,l?p():(_(),r=null,h()),f()}),l?(p(g),t.addEventListener("mouseenter",x),t.addEventListener("focus",x),t.addEventListener("mouseleave",C),t.addEventListener("blur",C)):h(),typeof window!="undefined"&&window.addEventListener("resize",f,{passive:!0});const A=new MutationObserver(e=>{for(const t of e)if(t.type==="characterData"||t.type==="childList"){f();break}});A.observe(t,{childList:!0,subtree:!0,characterData:!0}),t.__navMessageRotatorAttached=!0},t=(e,t)=>{if(!e||typeof e[t]!="function")return;try{e[t]()}catch(e){console.warn(`Nav modules: ${t} failed`,e)}};window.githubModule=function(){const o="navGithubActivity:",t=(e,t,n,s)=>{const a=document.getElementById("nav-message-rotator");if(!a)return null;const o=document.createElement("span");if(o.className="nav-module-message",e&&(o.dataset.label=e),o.setAttribute("aria-hidden","true"),e){const t=document.createElement("span");t.className="nav-module-label",t.textContent=e,o.appendChild(t)}const i=document.createElement("span");if(i.className="nav-module-text",n){const e=document.createElement("a");e.href=n,e.rel="noopener noreferrer",e.textContent=t,i.appendChild(e)}else i.textContent=t;if(o.appendChild(i),s){const e=document.createElement("span");e.className="nav-module-time",e.textContent=s,o.appendChild(e)}return a.appendChild(o),o},n=e=>{if(!e)return null;const a=new Date(e);if(Number.isNaN(a.getTime()))return null;const t=Math.floor((Date.now()-a.getTime())/1e3);if(t<5)return"just now";if(t<60)return`${t}s ago`;const n=Math.floor(t/60);if(n<60)return`${n}m ago`;const s=Math.floor(n/60);if(s<24)return`${s}h ago`;const o=Math.floor(s/24);if(o<30)return`${o}d ago`;const i=Math.floor(o/30);if(i<12)return`${i}mo ago`;const r=Math.floor(i/12);return`${r}y ago`},i=e=>{const t=e?.dataset||{};return{enabled:t.githubEnabled==="true"||t.navGithubEnabled==="true"||!1,username:t.githubUsername||t.navGithubUsername||t.navGithubUser||t.navModuleGithubUsername||null,eventsLimit:Number.parseInt(t.githubEventsLimit||t.navGithubEventsLimit||t.githubLimit||"",10)||3,cacheTTLMinutes:Number.parseInt(t.githubCacheTtl||t.navGithubCacheTtl||"",10)||15,label:typeof t.githubLabel=="string"&&t.githubLabel.trim().length>0?t.githubLabel.trim():null}},a=async(e,t)=>{const s=`https://api.github.com/users/${encodeURIComponent(e)}/events/public?per_page=${t}`,n=await fetch(s,{headers:{Accept:"application/vnd.github.v3+json"}});if(!n.ok)throw new Error(`GitHub API error ${n.status}`);return n.json()},s=e=>{var t,n,s,o,i,a,r,c;try{const d=e.type,l=((t=e.repo)==null?0[0]:t.name)||"";if(d==="PushEvent"){const t=Number.isFinite((n=e.payload)==null?0[0]:n.size)?e.payload.size:(i=(o=(s=e.payload)==null?0[0]:s.commits)==null?0[0]:o.length)!=null?i:null;return Number.isFinite(t)&&t>0?`pushed to ${l} (${t} commit${t===1?"":"s"})`:`pushed to ${l}`}if(d==="PullRequestEvent"){const t=((a=e.payload)==null?0[0]:a.action)||"updated";return`${t} PR in ${l}`}if(d==="IssuesEvent"){const t=((r=e.payload)==null?0[0]:r.action)||"updated";return`${t} issue in ${l}`}return d==="CreateEvent"?`created ${((c=e.payload)==null?0[0]:c.ref_type)||"content"} in ${l}`:d==="WatchEvent"?`starred ${l}`:d==="ForkEvent"?`forked ${l}`:`${d} in ${l}`}catch{return"GitHub activity"}},r=async()=>{var d,u;if(typeof document=="undefined")return;const h=document.getElementById("nav-message-rotator");if(!h)return;const r=i(h);if((!r.username||r.enabled===!1)&&((u=(d=window?.siteParams)==null?0[0]:d.navModule)==null?0[0]:u.github)){const e=window.siteParams.navModule.github;r.enabled=e.enabled===!0,r.username=r.username||e.username||null,r.eventsLimit=r.eventsLimit||e.eventsLimit||3,r.cacheTTLMinutes=r.cacheTTLMinutes||e.cacheTTLMinutes||15,r.label=r.label||(typeof e.label=="string"&&e.label.trim().length>0?e.label.trim():null)}if(r.label||(r.label="GitHub:"),!r.enabled||!r.username)return;const l=e(),m=`${o}${r.username}`;if(l)try{const e=l.getItem(m);if(e){const o=JSON.parse(e);if(o?.fetchedAt&&Date.now()-o.fetchedAt<(r.cacheTTLMinutes||15)*60*1e3&&Array.isArray(o.events)){const e=o.events[0],i=s(e),a=n(e.created_at);t(r.label,i,`https://github.com/${r.username}`,a);return}}}catch{}const c=t(r.label,"Loading GitHubâ€¦",`https://github.com/${r.username}`);try{const e=await a(r.username,r.eventsLimit||3);if(!e||!e.length){c&&(c.querySelector(".nav-module-text").textContent="No recent GitHub activity");return}const o=e[0],i=s(o),t=n(o.created_at);if(c){const n=c.querySelector(".nav-module-text");n.textContent=i;const e=c.querySelector(".nav-module-time");if(e)e.textContent=t||"";else if(t){const e=document.createElement("span");e.className="nav-module-time",e.textContent=t,c.appendChild(e)}}if(l)try{l.setItem(m,JSON.stringify({fetchedAt:Date.now(),events:e}))}catch{}}catch(e){c&&(c.querySelector(".nav-module-text").textContent="GitHub unavailable"),console.warn("nav github module fetch failed",e)}};return{initializeGithubMessage:r}}();const a=()=>{if(typeof document=="undefined")return;t(window?.coffeeModule,"initializeCoffeeMessage"),t(window?.weatherModule,"initializeWeatherMessage"),t(window?.githubModule,"initializeGithubMessage"),i()};typeof document!="undefined"&&document.addEventListener("DOMContentLoaded",a)})()})()