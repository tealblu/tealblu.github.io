(()=>{(()=>{const e=1440,t=(e,t)=>{if(typeof e=="number"&&Number.isFinite(e))return e|0;if(typeof e=="string"&&e.trim().length>0){const t=Number.parseInt(e.trim(),10);if(Number.isFinite(t))return t}return t},o=e=>{if(typeof e!="string")return null;const o=e.trim();if(o.length===0)return null;const s=o.match(/^(\d{1,2}):(\d{2})$/);if(!s)return null;const t=Number.parseInt(s[1],10),n=Number.parseInt(s[2],10);return!Number.isFinite(t)||!Number.isFinite(n)?null:t<0||t>23||n<0||n>59?null:t*60+n},i=()=>{const e=new Date;return e.getHours()*60+e.getMinutes()+e.getSeconds()/60},a=(t,n,s)=>{if(!Number.isFinite(t)||!Number.isFinite(n)||!Number.isFinite(s))return null;const r=t=>{const n=t%e;return n<0?n+e:n},i=r(t),o=r(n),a=r(s),c=(a-o+e)%e;if(c===0)return null;if(a>o)return i<=o?0:i>=a?1:(i-o)/(a-o);if(i>=o||i<=a){const t=i>=o?i-o:i+e-o;return t/c}return 0},n=e=>{if(typeof e!="string"||e.trim().length===0)return"Coffee tracker";const t=e.trim();return`${t.charAt(0).toUpperCase()}${t.slice(1)} tracker`},s=()=>{if(typeof document=="undefined")return;const e=document.getElementById("nav-message-rotator");if(!e||e.dataset.coffeeEnabled!=="true")return;if(e.querySelector('[data-coffee-message="true"]'))return;const l=Array.from(e.querySelectorAll(".nav-module-message")),s=document.createElement("span");s.className="nav-module-message",s.dataset.index=String(l.length),s.dataset.coffeeMessage="true";const o=typeof e.dataset.coffeeLabel=="string"&&e.dataset.coffeeLabel.trim().length>0?e.dataset.coffeeLabel.trim():"";if(o){s.dataset.label=o;const e=document.createElement("span");e.className="nav-module-label",e.textContent=o,s.appendChild(e)}const i=document.createElement("span");i.className="nav-module-text",i.textContent="Tracking coffeeâ€¦",s.appendChild(i),l.length||s.classList.add("is-active"),e.appendChild(s);const a=Math.max(0,t(e.dataset.coffeeMin,0)),u=Math.max(a,t(e.dataset.coffeeMax,Math.max(a,5))),h=typeof e.dataset.coffeeUnitSingular=="string"&&e.dataset.coffeeUnitSingular.trim().length>0?e.dataset.coffeeUnitSingular.trim():"cup",m=typeof e.dataset.coffeeUnitPlural=="string"&&e.dataset.coffeeUnitPlural.trim().length>0?e.dataset.coffeeUnitPlural.trim():"cups",r=typeof e.dataset.coffeeBeverage=="string"&&e.dataset.coffeeBeverage.trim().length>0?e.dataset.coffeeBeverage.trim():"coffee",d=typeof e.dataset.coffeeVerb=="string"&&e.dataset.coffeeVerb.trim().length>0?e.dataset.coffeeVerb.trim():"consumed today",c=o||n(r);try{const t=resolveDailyCount(a,u),n=t===1?h:m,e=[`${t} ${n}`];r&&e.push(`of ${r}`),d&&e.push(d),i.textContent=e.join(" "),o||(s.dataset.label=c)}catch(e){console.warn("Coffee tracker update failed",e),i.textContent=`${c}: unavailable`,o||(s.dataset.label=c)}};typeof window!="undefined"&&(window.coffeeModule=window.coffeeModule||{},window.coffeeModule.initializeCoffeeMessage=s)})()})()