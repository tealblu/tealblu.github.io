(()=>{(()=>{const o="navGithubActivity:",i=()=>{if(typeof window=="undefined")return null;try{return window.localStorage}catch(e){console.warn("github-module: localStorage access failed",e)}return null},t=(e,t,n,s)=>{const a=document.getElementById("nav-message-rotator");if(!a)return null;const o=document.createElement("span");o.className="nav-module-message",e&&(o.dataset.label=e),o.setAttribute("aria-hidden","true");const i=document.createElement("span");if(i.className="nav-module-text",e){const t=document.createElement("span");t.className="nav-module-label",t.textContent=e+" ",i.appendChild(t)}if(n){const e=document.createElement("a");e.href=n,e.rel="noopener noreferrer",e.textContent=t,i.appendChild(e)}else{const e=document.createTextNode(t);i.appendChild(e)}if(o.appendChild(i),s){const e=document.createElement("span");e.className="nav-module-time",e.textContent=s,o.appendChild(e)}return a.appendChild(o),o},e=(e,t,n)=>{if(!e)return;const s=e.querySelector(".nav-module-text");if(!s)return;const o=s.querySelector(".nav-module-label"),i=o?o.textContent:null;if(s.innerHTML="",i){const e=document.createElement("span");e.className="nav-module-label",e.textContent=i+" ",s.appendChild(e)}if(n){const e=document.createElement("a");e.href=n,e.rel="noopener noreferrer",e.textContent=t||"",s.appendChild(e)}else{const e=document.createTextNode(t||"");s.appendChild(e)}},n=e=>{if(!e)return null;const a=new Date(e);if(Number.isNaN(a.getTime()))return null;const t=Math.floor((Date.now()-a.getTime())/1e3);if(t<5)return"just now";if(t<60)return`${t}s ago`;const n=Math.floor(t/60);if(n<60)return`${n}m ago`;const s=Math.floor(n/60);if(s<24)return`${s}h ago`;const o=Math.floor(s/24);if(o<30)return`${o}d ago`;const i=Math.floor(o/30);if(i<12)return`${i}mo ago`;const r=Math.floor(i/12);return`${r}y ago`},a=e=>{const t=e?.dataset||{};return{enabled:t.githubEnabled==="true"||t.navGithubEnabled==="true"||!1,username:t.githubUsername||t.navGithubUsername||t.navGithubUser||t.navModuleGithubUsername||null,eventsLimit:Number.parseInt(t.githubEventsLimit||t.navGithubEventsLimit||t.githubLimit||"",10)||3,cacheTTLMinutes:Number.parseInt(t.githubCacheTtl||t.navGithubCacheTtl||"",10)||15,label:typeof t.githubLabel=="string"&&t.githubLabel.trim().length>0?t.githubLabel.trim():null}},r=async(e,t)=>{const s=`https://api.github.com/users/${encodeURIComponent(e)}/events/public?per_page=${t}`,n=await fetch(s,{headers:{Accept:"application/vnd.github.v3+json"}});if(!n.ok)throw new Error(`GitHub API error ${n.status}`);return n.json()},s=e=>{var t,n,s,o,i,a,r,c;try{const d=e.type,l=((t=e.repo)==null?0[0]:t.name)||"";if(d==="PushEvent"){const t=Number.isFinite((n=e.payload)==null?0[0]:n.size)?e.payload.size:(i=(o=(s=e.payload)==null?0[0]:s.commits)==null?0[0]:o.length)!=null?i:null;return Number.isFinite(t)&&t>0?`pushed to ${l} (${t} commit${t===1?"":"s"})`:`pushed to ${l}`}if(d==="PullRequestEvent"){const t=((a=e.payload)==null?0[0]:a.action)||"updated";return`${t} PR in ${l}`}if(d==="IssuesEvent"){const t=((r=e.payload)==null?0[0]:r.action)||"updated";return`${t} issue in ${l}`}return d==="CreateEvent"?`created ${((c=e.payload)==null?0[0]:c.ref_type)||"content"} in ${l}`:d==="WatchEvent"?`starred ${l}`:d==="ForkEvent"?`forked ${l}`:`${d} in ${l}`}catch{return"GitHub activity"}};if(window.githubModule=function(){const c=async()=>{var u,h;if(typeof document=="undefined")return;const m=document.getElementById("nav-message-rotator");if(!m)return;const c=a(m);if(console.debug&&console.debug("github-module: init",{cfg:c}),(!c.username||c.enabled===!1)&&((h=(u=window?.siteParams)==null?0[0]:u.navModule)==null?0[0]:h.github)){const e=window.siteParams.navModule.github;c.enabled=e.enabled===!0,c.username=c.username||e.username||null,c.eventsLimit=c.eventsLimit||e.eventsLimit||3,c.cacheTTLMinutes=c.cacheTTLMinutes||e.cacheTTLMinutes||15,c.label=c.label||(typeof e.label=="string"&&e.label.trim().length>0?e.label.trim():null)}if(c.label||(c.label="GitHub:"),!c.enabled||!c.username){console.debug&&console.debug("github-module: disabled or missing username",{enabled:c.enabled,username:c.username});return}const d=i(),f=`${o}${c.username}`;if(d)try{const e=d.getItem(f);if(e){const o=JSON.parse(e);if(o?.fetchedAt&&Date.now()-o.fetchedAt<(c.cacheTTLMinutes||15)*60*1e3&&Array.isArray(o.events)){const e=o.events[0],i=s(e),a=n(e.created_at);console.debug&&console.debug("github-module: using cached events",{ev:e}),t(c.label,i,`https://github.com/${c.username}`,a);return}}}catch{}const l=t(c.label,"Loading GitHubâ€¦",`https://github.com/${c.username}`);console.debug&&console.debug("github-module: created placeholder",{placeholder:l});try{const e=document.getElementById("nav-message-rotator");if(e&&l){const t=Boolean(e.__navMessageRotatorAttached);if(t){const t=e.querySelector(".nav-module-message.is-active");t&&t!==l&&(t.classList.remove("is-active"),t.setAttribute("aria-hidden","true")),l.classList.add("is-active"),l.setAttribute("aria-hidden","false");const n=typeof l.dataset.label=="string"?l.dataset.label:"",s=(l.textContent||"").trim();n?e.title=n:s&&(e.title=s)}}}catch(e){console.warn&&console.warn("github-module: show placeholder failed",e)}try{const t=await r(c.username,c.eventsLimit||3);if(!t||!t.length){l&&e(l,"No recent GitHub activity");return}const i=t[0],a=s(i),o=n(i.created_at);if(l){e(l,a,`https://github.com/${c.username}`);const t=l.querySelector(".nav-module-time");if(t)t.textContent=o||"";else if(o){const e=document.createElement("span");e.className="nav-module-time",e.textContent=o,l.appendChild(e)}}if(d)try{d.setItem(f,JSON.stringify({fetchedAt:Date.now(),events:t}))}catch{}}catch(t){l&&e(l,"GitHub unavailable"),console.warn("nav github module fetch failed",t)}};return{initializeGithubMessage:c}}(),typeof document!="undefined"){const e=()=>{try{window?.githubModule&&typeof window.githubModule.initializeGithubMessage=="function"&&window.githubModule.initializeGithubMessage()}catch(e){console.warn&&console.warn("github-module: init failed",e)}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e()}})()})()