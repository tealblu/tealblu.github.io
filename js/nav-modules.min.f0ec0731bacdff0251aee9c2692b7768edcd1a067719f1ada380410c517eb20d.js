(()=>{var t=()=>{if(typeof window=="undefined")return null;try{return window.localStorage}catch(e){console.warn("Nav modules localStorage access failed",e)}return null},e=e=>{if(!e)return null;const t=e.trim().toLowerCase();if(t.startsWith("#")){const e=t.slice(1),s=e.length===3?e.split("").map(e=>`${e}${e}`).join(""):e,n=Number.parseInt(s,16);return Number.isNaN(n)?null:n}const n=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)/);if(n){const[,e,t,s]=n.map(Number);return(e<<16)+(t<<8)+s}return null},n=t=>{if(typeof window=="undefined"||typeof document=="undefined")return null;const n=[document.body,document.documentElement].filter(Boolean);for(const o of n){const s=e(window.getComputedStyle(o).getPropertyValue(t));if(s!==null)return s}return null},s=()=>{if(typeof window=="undefined")return!1;try{return!!(window.matchMedia&&window.matchMedia("(pointer: coarse) and (hover: none)").matches)||!!("ontouchstart"in window||navigator.maxTouchPoints&&navigator.maxTouchPoints>0)||window.innerWidth<=768}catch{return!1}};(function(){try{typeof window!="undefined"&&(window.__navModulesController=!0)}catch{}const n=()=>{if(typeof document=="undefined")return;const n=document.getElementById("nav-message-rotator");if(!n||n.__navMessageRotatorAttached)return;let e=Array.from(n.querySelectorAll(".nav-module-message"));try{const t=e.length>0&&e.every(e=>typeof e.dataset.index!="undefined"&&e.dataset.index!==null&&e.dataset.index!=="");if(t)e.sort((e,t)=>{const n=Number(e.dataset.index),s=Number(t.dataset.index);return Number.isFinite(n)&&Number.isFinite(s)?n-s:0});else if(typeof window!="undefined"&&window.__siteParams&&window.__siteParams.navModule&&Array.isArray(window.__siteParams.navModule.messages)){const t=new Map(window.__siteParams.navModule.messages.map((e,t)=>{var n;return[String((n=e?.text)!=null?n:e).trim(),t]}));e.sort((e,n)=>{var s,o;const i=(((s=e.querySelector(".nav-module-text"))==null?0[0]:s.textContent)||e.textContent||"").trim(),a=(((o=n.querySelector(".nav-module-text"))==null?0[0]:o.textContent)||n.textContent||"").trim(),r=t.has(i)?t.get(i):Number.MAX_SAFE_INTEGER,c=t.has(a)?t.get(a):Number.MAX_SAFE_INTEGER;return r-c})}}catch(e){console.warn("Nav rotator: failed to apply config ordering",e)}if(!e.length)return;let s=e.findIndex(e=>e.classList.contains("is-active"));s<0&&(s=0);let i=null,o=null;const g=null,p=e=>{if(!e)return;e.classList.remove("is-overflowing");const n=e.querySelector(".nav-module-text");if(!n)return;e.dataset.navOriginalHtml&&(n.innerHTML=e.dataset.navOriginalHtml,delete e.dataset.navOriginalHtml);const t=n.querySelector(".nav-module-track");t&&(t.style.removeProperty("--nav-scroll-distance"),t.style.removeProperty("--nav-scroll-duration"),t.style.removeProperty("--nav-scroll-delay"))};let m=null;const O=()=>{m=null;const o=e[s];if(e.forEach((e,t)=>{t!==s&&p(e)}),!o)return;const i=o.querySelector(".nav-module-text");if(!i){p(o);return}const r=o.clientWidth,c=i.scrollWidth,u=typeof window!="undefined"&&typeof window.matchMedia=="function"&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;if(!Number.isFinite(r)||r<=0||c<=r||u){p(o);return}let t=i.querySelector(".nav-module-track");if(!t){o.dataset.navOriginalHtml=i.innerHTML;const n=i.innerHTML;i.innerHTML="",t=document.createElement("span"),t.className="nav-module-track";const e=document.createElement("span");e.className="nav-module-track-item",e.innerHTML=n;const s=e.cloneNode(!0);t.appendChild(e),t.appendChild(s),i.appendChild(t)}const l=t.firstElementChild?t.firstElementChild.scrollWidth:c,h=32,d=Math.max(0,Math.round(l+h)),a=Math.max(6e3,Math.min(2e4,Math.round(l/40*1e3)));t.style.setProperty("--nav-scroll-distance",`${d}px`),t.style.setProperty("--nav-scroll-duration",`${a}ms`);try{const s=Number.parseInt(n.dataset.navScrollDelayMs||"",10);let e=Number.isFinite(s)?Math.max(0,s):NaN;if(!Number.isFinite(e)){const t=typeof window!="undefined"&&window.__siteParams&&window.__siteParams.navModule&&Number.isFinite(Number(window.__siteParams.navModule.marqueePauseMs))?Number(window.__siteParams.navModule.marqueePauseMs):NaN;e=Number.isFinite(t)?Math.max(0,t):0}t.style.setProperty("--nav-scroll-delay",`${e}ms`)}catch{}try{t.style.willChange="transform",t.style.transform="translate3d(0,0,0)"}catch{}try{const e=typeof window!="undefined"?window.__navMessageRotatorState:null;if(e&&e.activeIndex===s&&Number.isFinite(e.scrollDistance)&&e.scrollDistance===d&&Number.isFinite(e.durationMs)&&e.durationMs===a){const n=Date.now(),s=Math.max(0,n-Number(e.timestamp||n)),o=(Number(e.progress||0)+s/a)%1;t.style.animationDelay=`-${Math.round(o*a)}ms`}else t.style.animationDelay&&t.style.removeProperty("animation-delay")}catch{}o.classList.add("is-overflowing")},l=()=>{if(typeof window=="undefined")return;m!==null&&window.cancelAnimationFrame(m),m=window.requestAnimationFrame(O)},y=(t,o={})=>{const a=(Number(t)%e.length+e.length)%e.length;e.forEach((e,t)=>{const s=t===a;if(e.classList.toggle("is-active",s),e.setAttribute("aria-hidden",s?"false":"true"),s){n.dataset.activeIndex=String(t);const s=typeof e.dataset.label=="string"?e.dataset.label:"",o=(e.textContent||"").trim();s?n.title=s:o?n.title=o:n.removeAttribute("title")}}),s=a;const r=Number.isFinite(o?.rotationAt)?Number(o.rotationAt):Date.now();i=r,l()};let t=Number.parseInt(n.dataset.rotationInterval||"",10);(!Number.isFinite(t)||t<=0)&&(t=Number.isFinite(g)&&g>0?g|0:NaN);const h=typeof window!="undefined"&&typeof window.matchMedia=="function"?window.matchMedia("(prefers-reduced-motion: reduce)"):null,d=Number.isFinite(t)&&t>0;d&&(t=Math.max(1,t|0));let a=d&&!(h&&h.matches),f=null;const k=()=>{},r=Date.now();let c=null;if(a&&d)if(Number.isFinite(o)){let n=o,a=s;for(;n<=r;)n+=t,a=(a+1)%e.length;o=n,i=n-t,s=a,c=n-r}else if(Number.isFinite(i)){const n=Math.max(0,r-i);if(n>=t){const o=Math.floor(n/t);o>0&&(s=(s+o)%e.length,i+=o*t)}const l=Math.max(0,r-i),a=t-l;c=a>0?a:t,o=r+c}else i=r,c=t,o=r+t;else o=null;const w=Number.isFinite(i)?Number(i):Date.now();y(s,{rotationAt:w}),l();const v=()=>{f!==null&&(window.clearTimeout(f),f=null)},j=()=>{const t=(s+1)%e.length;y(t),o=null},u=e=>{if(!a)return;v();const s=d?Math.max(t,1e3):4e3,i=Number.isFinite(e)?Number(e):s,n=Math.max(i,100);o=Date.now()+n,f=window.setTimeout(()=>{j(),u()},n)},b=()=>{if(!a)return;v(),o=null},_=()=>{if(!a)return;u()};n.addEventListener("click",()=>{try{E()}catch{}j(),a&&u()}),h&&typeof h.addEventListener=="function"&&h.addEventListener("change",e=>{a=d&&!e.matches,a?u():(v(),o=null),l()}),a&&(u(c),n.addEventListener("mouseenter",b),n.addEventListener("focus",b),n.addEventListener("mouseleave",_),n.addEventListener("blur",_)),typeof window!="undefined"&&window.addEventListener("resize",l,{passive:!0});const x=new MutationObserver(e=>{for(const t of e)if(t.type==="characterData"||t.type==="childList"){l();break}});x.observe(n,{childList:!0,subtree:!0,characterData:!0});const C=()=>{try{const i=e[s];if(!i)return;const a=i.querySelector(".nav-module-text");if(!a)return;const n=a.querySelector(".nav-module-track");if(!n)return;const r=window.getComputedStyle(n),o=r.transform||r.webkitTransform||"";let c=0;if(o&&o!=="none"){const e=o.match(/matrix3d\(([-0-9e., ]+)\)/)||o.match(/matrix\(([-0-9e., ]+)\)/);if(e&&e[1]){const t=e[1].split(/,\s*/).map(Number);c=t.length===6?t[4]:t.length>=13?t[12]:0}}const l=n.style.getPropertyValue("--nav-scroll-distance")||"",d=n.style.getPropertyValue("--nav-scroll-duration")||"",t=l?Number(l.replace("px","").trim()):NaN,u=d?Number(d.replace("ms","").trim()):NaN;if(!Number.isFinite(t)||!Number.isFinite(u)||t<=0)return;const h=(c<0?-c:c)%t/t;window.__navMessageRotatorState={activeIndex:s,progress:h,timestamp:Date.now(),scrollDistance:t,durationMs:u}}catch{}};typeof window!="undefined"&&window.Turbo&&document.addEventListener("turbo:before-cache",C);const E=()=>{try{typeof window!="undefined"&&(window.__navMessageRotatorState=null),e.forEach(e=>{try{const n=e.querySelector(".nav-module-text");if(!n)return;const t=n.querySelector(".nav-module-track");if(!t)return;t.style.removeProperty("animation-delay"),t.style.transform="translate3d(0,0,0)"}catch{}})}catch{}};n.__navMessageRotatorAttached=!0},e=(e,t)=>{if(!e||typeof e[t]!="function")return;try{e[t]()}catch(e){console.warn(`Nav modules: ${t} failed`,e)}},t=()=>{if(typeof document=="undefined")return;e(window?.coffeeModule,"initializeCoffeeMessage"),e(window?.weatherModule,"initializeWeatherMessage"),e(window?.githubModule,"initializeGithubMessage"),n()};typeof document!="undefined"&&(document.addEventListener("DOMContentLoaded",t),document.addEventListener("turbo:load",t))})();try{typeof window!="undefined"&&(window.siteUtils=window.siteUtils||{},window.siteUtils.getLocalStorage=t,window.siteUtils.cssColorToInt=e,window.siteUtils.getThemeColor=n,window.siteUtils.isMobileDevice=s)}catch{}})()