(()=>{var t=()=>{if(typeof window=="undefined")return null;try{return window.localStorage}catch(e){console.warn("Nav modules localStorage access failed",e)}return null},e=e=>{if(!e)return null;const t=e.trim().toLowerCase();if(t.startsWith("#")){const e=t.slice(1),s=e.length===3?e.split("").map(e=>`${e}${e}`).join(""):e,n=Number.parseInt(s,16);return Number.isNaN(n)?null:n}const n=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)/);if(n){const[,e,t,s]=n.map(Number);return(e<<16)+(t<<8)+s}return null},n=t=>{if(typeof window=="undefined"||typeof document=="undefined")return null;const n=[document.body,document.documentElement].filter(Boolean);for(const o of n){const s=e(window.getComputedStyle(o).getPropertyValue(t));if(s!==null)return s}return null},s=()=>{if(typeof window=="undefined")return!1;try{return!!(window.matchMedia&&window.matchMedia("(pointer: coarse) and (hover: none)").matches)||!!("ontouchstart"in window||navigator.maxTouchPoints&&navigator.maxTouchPoints>0)||window.innerWidth<=768}catch{return!1}};(function(){try{typeof window!="undefined"&&(window.__navModulesController=!0)}catch{}const n=()=>{if(typeof document=="undefined")return;const t=document.getElementById("nav-message-rotator");if(!t||t.__navMessageRotatorAttached)return;const s=Array.from(t.querySelectorAll(".nav-module-message"));if(!s.length)return;let n=s.findIndex(e=>e.classList.contains("is-active"));n<0&&(n=0);let i=null,o=null;const g=null,p=e=>{if(!e)return;e.classList.remove("is-overflowing");const t=e.querySelector(".nav-module-text");if(!t)return;e.dataset.navOriginalHtml&&(t.innerHTML=e.dataset.navOriginalHtml,delete e.dataset.navOriginalHtml);const n=t.querySelector(".nav-module-track");n&&(n.style.removeProperty("--nav-scroll-distance"),n.style.removeProperty("--nav-scroll-duration"))};let f=null;const w=()=>{f=null;const t=s[n];if(s.forEach((e,t)=>{t!==n&&p(e)}),!t)return;const o=t.querySelector(".nav-module-text");if(!o){p(t);return}const a=t.clientWidth,r=o.scrollWidth,d=typeof window!="undefined"&&typeof window.matchMedia=="function"&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;if(!Number.isFinite(a)||a<=0||r<=a||d){p(t);return}let e=o.querySelector(".nav-module-track");if(!e){t.dataset.navOriginalHtml=o.innerHTML;const s=o.innerHTML;o.innerHTML="",e=document.createElement("span"),e.className="nav-module-track";const n=document.createElement("span");n.className="nav-module-track-item",n.innerHTML=s;const i=n.cloneNode(!0);e.appendChild(n),e.appendChild(i),o.appendChild(e)}const c=e.firstElementChild?e.firstElementChild.scrollWidth:r,u=32,l=Math.max(0,Math.round(c+u)),i=Math.max(6e3,Math.min(2e4,Math.round(c/40*1e3)));e.style.setProperty("--nav-scroll-distance",`${l}px`),e.style.setProperty("--nav-scroll-duration",`${i}ms`);try{e.style.willChange="transform",e.style.transform="translate3d(0,0,0)"}catch{}try{const t=typeof window!="undefined"?window.__navMessageRotatorState:null;if(t&&t.activeIndex===n&&Number.isFinite(t.scrollDistance)&&t.scrollDistance===l&&Number.isFinite(t.durationMs)&&t.durationMs===i){const n=Date.now(),s=Math.max(0,n-Number(t.timestamp||n)),o=(Number(t.progress||0)+s/i)%1;e.style.animationDelay=`-${Math.round(o*i)}ms`}else e.style.animationDelay&&e.style.removeProperty("animation-delay")}catch{}t.classList.add("is-overflowing")},d=()=>{if(typeof window=="undefined")return;f!==null&&window.cancelAnimationFrame(f),f=window.requestAnimationFrame(w)},j=(e,o={})=>{const a=(Number(e)%s.length+s.length)%s.length;s.forEach((e,n)=>{const s=n===a;if(e.classList.toggle("is-active",s),e.setAttribute("aria-hidden",s?"false":"true"),s){t.dataset.activeIndex=String(n);const s=typeof e.dataset.label=="string"?e.dataset.label:"",o=(e.textContent||"").trim();s?t.title=s:o?t.title=o:t.removeAttribute("title")}}),n=a;const r=Number.isFinite(o?.rotationAt)?Number(o.rotationAt):Date.now();i=r,d()};let e=Number.parseInt(t.dataset.rotationInterval||"",10);(!Number.isFinite(e)||e<=0)&&(e=Number.isFinite(g)&&g>0?g|0:NaN);const u=typeof window!="undefined"&&typeof window.matchMedia=="function"?window.matchMedia("(prefers-reduced-motion: reduce)"):null,h=Number.isFinite(e)&&e>0;h&&(e=Math.max(1,e|0));let a=h&&!(u&&u.matches),m=null;const E=()=>{},r=Date.now();let c=null;if(a&&h)if(Number.isFinite(o)){let t=o,a=n;for(;t<=r;)t+=e,a=(a+1)%s.length;o=t,i=t-e,n=a,c=t-r}else if(Number.isFinite(i)){const t=Math.max(0,r-i);if(t>=e){const o=Math.floor(t/e);o>0&&(n=(n+o)%s.length,i+=o*e)}const l=Math.max(0,r-i),a=e-l;c=a>0?a:e,o=r+c}else i=r,c=e,o=r+e;else o=null;const O=Number.isFinite(i)?Number(i):Date.now();j(n,{rotationAt:O}),d();const v=()=>{m!==null&&(window.clearTimeout(m),m=null)},b=()=>{const e=(n+1)%s.length;j(e),o=null},l=t=>{if(!a)return;v();const s=h?Math.max(e,1e3):4e3,i=Number.isFinite(t)?Number(t):s,n=Math.max(i,100);o=Date.now()+n,m=window.setTimeout(()=>{b(),l()},n)},y=()=>{if(!a)return;v(),o=null},_=()=>{if(!a)return;l()};t.addEventListener("click",()=>{b(),a&&l()}),u&&typeof u.addEventListener=="function"&&u.addEventListener("change",e=>{a=h&&!e.matches,a?l():(v(),o=null),d()}),a&&(l(c),t.addEventListener("mouseenter",y),t.addEventListener("focus",y),t.addEventListener("mouseleave",_),t.addEventListener("blur",_)),typeof window!="undefined"&&window.addEventListener("resize",d,{passive:!0});const x=new MutationObserver(e=>{for(const t of e)if(t.type==="characterData"||t.type==="childList"){d();break}});x.observe(t,{childList:!0,subtree:!0,characterData:!0});const C=()=>{try{const i=s[n];if(!i)return;const a=i.querySelector(".nav-module-text");if(!a)return;const t=a.querySelector(".nav-module-track");if(!t)return;const r=window.getComputedStyle(t),o=r.transform||r.webkitTransform||"";let c=0;if(o&&o!=="none"){const e=o.match(/matrix3d\(([-0-9e., ]+)\)/)||o.match(/matrix\(([-0-9e., ]+)\)/);if(e&&e[1]){const t=e[1].split(/,\s*/).map(Number);c=t.length===6?t[4]:t.length>=13?t[12]:0}}const l=t.style.getPropertyValue("--nav-scroll-distance")||"",d=t.style.getPropertyValue("--nav-scroll-duration")||"",e=l?Number(l.replace("px","").trim()):NaN,u=d?Number(d.replace("ms","").trim()):NaN;if(!Number.isFinite(e)||!Number.isFinite(u)||e<=0)return;const h=(c<0?-c:c)%e/e;window.__navMessageRotatorState={activeIndex:n,progress:h,timestamp:Date.now(),scrollDistance:e,durationMs:u}}catch{}};typeof window!="undefined"&&window.Turbo&&document.addEventListener("turbo:before-cache",C),t.__navMessageRotatorAttached=!0},e=(e,t)=>{if(!e||typeof e[t]!="function")return;try{e[t]()}catch(e){console.warn(`Nav modules: ${t} failed`,e)}},t=()=>{if(typeof document=="undefined")return;e(window?.coffeeModule,"initializeCoffeeMessage"),e(window?.weatherModule,"initializeWeatherMessage"),e(window?.githubModule,"initializeGithubMessage"),n()};typeof document!="undefined"&&(document.addEventListener("DOMContentLoaded",t),document.addEventListener("turbo:load",t))})();try{typeof window!="undefined"&&(window.siteUtils=window.siteUtils||{},window.siteUtils.getLocalStorage=t,window.siteUtils.cssColorToInt=e,window.siteUtils.getThemeColor=n,window.siteUtils.isMobileDevice=s)}catch{}})()