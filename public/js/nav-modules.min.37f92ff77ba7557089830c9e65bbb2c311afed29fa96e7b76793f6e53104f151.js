(()=>{var t=()=>{if(typeof window=="undefined")return null;try{return window.localStorage}catch(e){console.warn("Nav modules localStorage access failed",e)}return null},e=e=>{if(!e)return null;const t=e.trim().toLowerCase();if(t.startsWith("#")){const e=t.slice(1),s=e.length===3?e.split("").map(e=>`${e}${e}`).join(""):e,n=Number.parseInt(s,16);return Number.isNaN(n)?null:n}const n=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)/);if(n){const[,e,t,s]=n.map(Number);return(e<<16)+(t<<8)+s}return null},n=t=>{if(typeof window=="undefined"||typeof document=="undefined")return null;const n=[document.body,document.documentElement].filter(Boolean);for(const o of n){const s=e(window.getComputedStyle(o).getPropertyValue(t));if(s!==null)return s}return null},s=()=>{if(typeof window=="undefined")return!1;try{return!!(window.matchMedia&&window.matchMedia("(pointer: coarse) and (hover: none)").matches)||!!("ontouchstart"in window||navigator.maxTouchPoints&&navigator.maxTouchPoints>0)||window.innerWidth<=768}catch{return!1}};(function(){try{typeof window!="undefined"&&(window.__navModulesController=!0)}catch{}const n=()=>{if(typeof document=="undefined")return;const t=document.getElementById("nav-message-rotator");if(!t||t.__navMessageRotatorAttached)return;let n=Array.from(t.querySelectorAll(".nav-module-message"));const p=typeof window!="undefined"&&window.__siteParams&&window.__siteParams.navModule?window.__siteParams.navModule:null;if(p){const a=new Set(["weather","coffee","messages","github"]),e=[];for(const t of Object.keys(p))a.has(t)&&e.push(t);e.length||e.push("weather","coffee","messages","github");const r=Array.isArray(p.messages)?p.messages:[],s=new Map(r.map((e,t)=>{var n;return[String((n=e?.text)!=null?n:e).trim(),t]})),o=new Map(n.map((e,t)=>[e,t])),i=e=>{try{if(e.dataset&&e.dataset.weatherMessage==="true")return"weather";if(e.dataset&&e.dataset.coffeeMessage==="true")return"coffee";if(e.dataset&&e.dataset.githubMessage==="true")return"github"}catch{}return"messages"};n.sort((t,n)=>{var a,r;const c=i(t),l=i(n),d=e.indexOf(c),u=e.indexOf(l),h=d===-1?Number.MAX_SAFE_INTEGER:d,m=u===-1?Number.MAX_SAFE_INTEGER:u;if(h!==m)return h-m;if(c==="messages"&&l==="messages"){const e=(((a=t.querySelector(".nav-module-text"))==null?0[0]:a.textContent)||t.textContent||"").trim(),o=(((r=n.querySelector(".nav-module-text"))==null?0[0]:r.textContent)||n.textContent||"").trim(),i=s.has(e)?s.get(e):Number.MAX_SAFE_INTEGER,c=s.has(o)?s.get(o):Number.MAX_SAFE_INTEGER;if(i!==c)return i-c}return(o.get(t)||0)-(o.get(n)||0)});for(const e of n)try{t.appendChild(e)}catch{}}if(!n.length)return;let s=n.findIndex(e=>e.classList.contains("is-active"));s<0&&(s=0);let i=null,o=null;const b=null,g=e=>{if(!e)return;e.classList.remove("is-overflowing");const n=e.querySelector(".nav-module-text");if(!n)return;e.dataset.navOriginalHtml&&(n.innerHTML=e.dataset.navOriginalHtml,delete e.dataset.navOriginalHtml);const t=n.querySelector(".nav-module-track");t&&(t.style.removeProperty("--nav-scroll-distance"),t.style.removeProperty("--nav-scroll-duration"),t.style.removeProperty("--nav-scroll-delay"))};let f=null;const O=()=>{f=null;const o=n[s];if(n.forEach((e,t)=>{t!==s&&g(e)}),!o)return;const i=o.querySelector(".nav-module-text");if(!i){g(o);return}const r=o.clientWidth,c=i.scrollWidth,u=typeof window!="undefined"&&typeof window.matchMedia=="function"&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;if(!Number.isFinite(r)||r<=0||c<=r||u){g(o);return}let e=i.querySelector(".nav-module-track");if(!e){o.dataset.navOriginalHtml=i.innerHTML;const n=i.innerHTML;i.innerHTML="",e=document.createElement("span"),e.className="nav-module-track";const t=document.createElement("span");t.className="nav-module-track-item",t.innerHTML=n;const s=t.cloneNode(!0);e.appendChild(t),e.appendChild(s),i.appendChild(e)}const l=e.firstElementChild?e.firstElementChild.scrollWidth:c,h=32,d=Math.max(0,Math.round(l+h)),a=Math.max(6e3,Math.min(2e4,Math.round(l/40*1e3)));e.style.setProperty("--nav-scroll-distance",`${d}px`),e.style.setProperty("--nav-scroll-duration",`${a}ms`);try{const s=Number.parseInt(t.dataset.navScrollDelayMs||"",10);let n=Number.isFinite(s)?Math.max(0,s):NaN;if(!Number.isFinite(n)){const e=typeof window!="undefined"&&window.__siteParams&&window.__siteParams.navModule&&Number.isFinite(Number(window.__siteParams.navModule.marqueePauseMs))?Number(window.__siteParams.navModule.marqueePauseMs):NaN;n=Number.isFinite(e)?Math.max(0,e):0}e.style.setProperty("--nav-scroll-delay",`${n}ms`)}catch{}try{e.style.willChange="transform",e.style.transform="translate3d(0,0,0)"}catch{}try{const t=typeof window!="undefined"?window.__navMessageRotatorState:null;if(t&&t.activeIndex===s&&Number.isFinite(t.scrollDistance)&&t.scrollDistance===d&&Number.isFinite(t.durationMs)&&t.durationMs===a){const n=Date.now(),s=Math.max(0,n-Number(t.timestamp||n)),o=(Number(t.progress||0)+s/a)%1;e.style.animationDelay=`-${Math.round(o*a)}ms`}else e.style.animationDelay&&e.style.removeProperty("animation-delay")}catch{}o.classList.add("is-overflowing")},d=()=>{if(typeof window=="undefined")return;f!==null&&window.cancelAnimationFrame(f),f=window.requestAnimationFrame(O)},j=(e,o={})=>{const a=(Number(e)%n.length+n.length)%n.length;n.forEach((e,n)=>{const s=n===a;if(e.classList.toggle("is-active",s),e.setAttribute("aria-hidden",s?"false":"true"),s){t.dataset.activeIndex=String(n);const s=typeof e.dataset.label=="string"?e.dataset.label:"",o=(e.textContent||"").trim();s?t.title=s:o?t.title=o:t.removeAttribute("title")}}),s=a;const r=Number.isFinite(o?.rotationAt)?Number(o.rotationAt):Date.now();i=r,d()};let e=Number.parseInt(t.dataset.rotationInterval||"",10);(!Number.isFinite(e)||e<=0)&&(e=Number.isFinite(b)&&b>0?b|0:NaN);const u=typeof window!="undefined"&&typeof window.matchMedia=="function"?window.matchMedia("(prefers-reduced-motion: reduce)"):null,h=Number.isFinite(e)&&e>0;h&&(e=Math.max(1,e|0));let a=h&&!(u&&u.matches),m=null;const A=()=>{},r=Date.now();let l=null;if(a&&h)if(Number.isFinite(o)){let t=o,a=s;for(;t<=r;)t+=e,a=(a+1)%n.length;o=t,i=t-e,s=a,l=t-r}else if(Number.isFinite(i)){const t=Math.max(0,r-i);if(t>=e){const o=Math.floor(t/e);o>0&&(s=(s+o)%n.length,i+=o*e)}const c=Math.max(0,r-i),a=e-c;l=a>0?a:e,o=r+l}else i=r,l=e,o=r+e;else o=null;const x=Number.isFinite(i)?Number(i):Date.now();j(s,{rotationAt:x}),d();const v=()=>{m!==null&&(window.clearTimeout(m),m=null)},y=()=>{const e=(s+1)%n.length;j(e),o=null},c=t=>{if(!a)return;v();const s=h?Math.max(e,1e3):4e3,i=Number.isFinite(t)?Number(t):s,n=Math.max(i,100);o=Date.now()+n,m=window.setTimeout(()=>{y(),c()},n)},_=()=>{if(!a)return;v(),o=null},w=()=>{if(!a)return;c()};t.addEventListener("click",()=>{try{k()}catch{}y(),a&&c()}),u&&typeof u.addEventListener=="function"&&u.addEventListener("change",e=>{a=h&&!e.matches,a?c():(v(),o=null),d()}),a&&(c(l),t.addEventListener("mouseenter",_),t.addEventListener("focus",_),t.addEventListener("mouseleave",w),t.addEventListener("blur",w)),typeof window!="undefined"&&window.addEventListener("resize",d,{passive:!0});const C=new MutationObserver(e=>{for(const t of e)if(t.type==="characterData"||t.type==="childList"){d();break}});C.observe(t,{childList:!0,subtree:!0,characterData:!0});const E=()=>{try{const i=n[s];if(!i)return;const a=i.querySelector(".nav-module-text");if(!a)return;const t=a.querySelector(".nav-module-track");if(!t)return;const r=window.getComputedStyle(t),o=r.transform||r.webkitTransform||"";let c=0;if(o&&o!=="none"){const e=o.match(/matrix3d\(([-0-9e., ]+)\)/)||o.match(/matrix\(([-0-9e., ]+)\)/);if(e&&e[1]){const t=e[1].split(/,\s*/).map(Number);c=t.length===6?t[4]:t.length>=13?t[12]:0}}const l=t.style.getPropertyValue("--nav-scroll-distance")||"",d=t.style.getPropertyValue("--nav-scroll-duration")||"",e=l?Number(l.replace("px","").trim()):NaN,u=d?Number(d.replace("ms","").trim()):NaN;if(!Number.isFinite(e)||!Number.isFinite(u)||e<=0)return;const h=(c<0?-c:c)%e/e;window.__navMessageRotatorState={activeIndex:s,progress:h,timestamp:Date.now(),scrollDistance:e,durationMs:u}}catch{}};typeof window!="undefined"&&window.Turbo&&document.addEventListener("turbo:before-cache",E);const k=()=>{try{typeof window!="undefined"&&(window.__navMessageRotatorState=null),n.forEach(e=>{try{const n=e.querySelector(".nav-module-text");if(!n)return;const t=n.querySelector(".nav-module-track");if(!t)return;t.style.removeProperty("animation-delay"),t.style.transform="translate3d(0,0,0)"}catch{}})}catch{}};t.__navMessageRotatorAttached=!0},e=(e,t)=>{if(!e||typeof e[t]!="function")return;try{e[t]()}catch(e){console.warn(`Nav modules: ${t} failed`,e)}},t=()=>{if(typeof document=="undefined")return;e(window?.coffeeModule,"initializeCoffeeMessage"),e(window?.weatherModule,"initializeWeatherMessage"),e(window?.githubModule,"initializeGithubMessage"),n()};typeof document!="undefined"&&(document.addEventListener("DOMContentLoaded",t),document.addEventListener("turbo:load",t))})();try{typeof window!="undefined"&&(window.siteUtils=window.siteUtils||{},window.siteUtils.getLocalStorage=t,window.siteUtils.cssColorToInt=e,window.siteUtils.getThemeColor=n,window.siteUtils.isMobileDevice=s)}catch{}})()